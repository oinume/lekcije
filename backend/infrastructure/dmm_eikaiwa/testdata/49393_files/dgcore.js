(function(c){var f="cookie storage",e="local storage",d=true,a=null,b=false;if("SPDemographic" in c)return;var g={defaultCookieDomain:"localhost",defaultCookieExpiresDay:365,optoutKey:"optout"};function k(){this.initialize.apply(this,arguments)}k.prototype={initialize:function(d,b){var a=this;a.storages=[];a.storages.push(new h(d,b));"localStorage" in c&&a.storages.push(new i);a.storageLength=a.storages.length},getItem:function(e){if(this._validItem(e)==b)return a;for(var c=0;c<this.storageLength;c++){var d=this.storages[c].getItem(e);if(d!=a)return d}return a},_getAll:function(f){if(this._validItem(f)==b)return a;for(var e=[],c=0;c<this.storageLength;c++){var d=this.storages[c].getItem(f);d!=a&&e.push(d)}return e},setItem:function(d,e){var a=this;if(a._validItem(d)==b||a._validItem(e)==b)return;for(var c=0;c<a.storageLength;c++)a.storages[c].setItem(d,e)},removeItem:function(c){if(this._validItem(c)==b)return;for(var a=0;a<this.storageLength;a++)this.storages[a].removeItem(c)},supportList:function(){var c=this;for(var d="__im__"+Math.random()*100,e=[],b=0;b<c.storageLength;b++){c.storages[b].setItem(d,"1");if(c.storages[b].getItem(d)!=a){e.push(c.storages[b].name);c.storages[b].removeItem(d)}}return e},available:function(){return this.supportList().length>0},_availableSomeFunction:function(e){for(var c=this.supportList(),a=0;a<c.length;a++)if(c[a]==e)return d;return b},_availableLocalStorage:function(){return this._availableSomeFunction(e)},_availableCookie:function(){return this._availableSomeFunction(f)},needSync:function(e){if(c.postMessage&&this._availableLocalStorage()&&!this._availableCookie())if(this.getItem(e)!=a)return d;else return b;return b},innerSync:function(a){var b=this.getItem(a);b&&this.setItem(a,b)},_validItem:function(a){return typeof a=="string"}};function h(){this.initialize.apply(this,arguments)}h.prototype={initialize:function(a,b){this.domain=a||g.defaultCookieDomain;this.expire=b||g.defaultCookieExpiresDay;this.name=f},getItem:function(b){try{return this.getCookie(b)}catch(c){return a}},getName:function(){return this.name},setItem:function(a,b){try{this.setCookie(a,b,this.expire,this.domain)}catch(c){}},removeItem:function(a){this.setCookie(a,"",-1)},setCookie:function(i,g,e,d){if(c.navigator.cookieEnabled){var h=e||this.expire,f=d||this.domain,b=new Date;b.setDate(b.getDate()+h);return document.cookie=[encodeURIComponent(i),"=",encodeURIComponent(g),";expires="+b.toUTCString(),"; path=/","; domain="+f].join("")}else return a},getCookie:function(d){if(c.navigator.cookieEnabled){var b;return (b=(new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)")).exec(document.cookie))?decodeURIComponent(b[1]):a}else return a}};function i(){this.initialize.apply(this,arguments)}i.prototype={initialize:function(){this.name=e},getItem:function(b){try{return c.localStorage.getItem(b)}catch(d){return a}},getName:function(){return this.name},setItem:function(a,b){try{c.localStorage.setItem(a,b)}catch(d){}},removeItem:function(a){try{c.localStorage.removeItem(a)}catch(b){}}};var m=4,o=200;function p(){var b=this;b.createHttpObject=function(){var b=this;b.reqData=a;if(c.XMLHttpRequest)b.reqData=new c.XMLHttpRequest;else if(c.ActiveXObject)try{b.reqData=new c.ActiveXObject("Msxml2.XMLHTTP")}catch(d){b.reqData=new c.ActiveXObject("Microsoft.XMLHTTP")}return b.reqData};b.connectToServerAsync=function(b,a){this.createHttpObject();this.connectAsync(b,this.reqData,a)};b.connectAsync=function(c,b,f){if(b!=a){this.connectUrl=c;var e=function(){r(b,f)};b.onreadystatechange=e;if(b.withCredentials)b.withCredentials="true";b.open("GET",c,d);b.send(a)}};b.getResponseText=function(){return this.reqData.responseText};b.getStatus=function(){return this.reqData.status};b.getUrl=function(){return this.connectUrl}}function r(b,c){if(c!=a)b.readyState==m&&b.status==o&&c.onSuccess(b.responseText)}function j(){}j.prototype.onSuccess={};function s(e){var c=e.getItem(g.optoutKey);if(c==a)return b;else if(c==="true")return d;else return b}function q(b,a){return new k(b,a)}function n(){return new p}function l(){return new j}if(!c.SPDemographic)c.SPDemographic={createStorageInstance:function(a,b){return q(a,b)},createHttpConnectionInstance:function(){return n()},createHttpConnectionCallbackInstance:function(){return l()},isOptOut:function(a){return s(a)}}})(window)